<!DOCTYPE html>

<html>
<head>
  {% extends 'base.html' %}
  {% block head %}
  <!-- <meta http-equiv="refresh" content="10"> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  {% endblock %}
</head>
<body>
  {% block body %}
  <div class='sweep_up' align='center'>
    <div id='search_container'>
      <form style="display: inline;" onsubmit="return refresh()">
        <input type="text" id="locate" name="locate" placeholder="park, address, or location">
        <span id='search_spinner'><i class="fas fa-asterisk fa-spin fa-fw" style="display: none;"></i></span>
      </form>
    </div>
    <iframe id='main_popup_map' src="{{ url_for('get_full_map') }}" class='full_map' onload='map_loaded()'></iframe>
  </div>
  <script>
    refresh = function() {
      var ifr = document.getElementById('main_popup_map');
      var locate = document.getElementById('locate').value;
      document.getElementById('search_spinner').style.display='inline';
      ifr.src="{{ url_for('get_full_map') }}"+`?locate=${locate}`;
      return false;
    }
    map_loaded = function() {
      document.getElementById('search_spinner').style.display='none';
    }
  </script>
  {% endblock %}
</body>
</html>
